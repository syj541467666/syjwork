<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<script type="text/javascript">
			//Promise 是异步编程的解决方案
			//Promise 是一个对象，它可以获取异步操作的消息
			//Promise 对象代表了未来将要发生的事件，用来传递异步操作的消息。
			//console.log(Promise) //在控制台中打印出日志信息
			//console.dir(Promise) //在控制台中打印出对象的所有属性和方法
			
			//Promise 其实是一个构造函数，它有resolve和reject,race，all方法
			//Promise 的原型prototype上有catch和then方法，catch和then方法可以共享给Promise实例对象
			
			//为什么要使用Promise
			//使用定时器模拟异步操作
			setTimeout(function(){ //1
				console.log("武汉")
				setTimeout(function(){ //2
					console.log("疫情")
					setTimeout(function(){ //3
						console.log("防控")
						setTimeout(function(){ //4
							console.log("加油")
						},1000)
					},1000)
				},1000)
			},1000)
			
			//改写成Promise
			
			function fn1(){
				return new Promise(function(resolve,reject){
					setTimeout(function(){
						resolve("武汉1")
					},1000)
				})
			}
			function fn2(){
				return new Promise(function(resolve,reject){
					setTimeout(function(){
						resolve("疫情1")
					},1000)
				})
			}
			function fn3(){
				return new Promise(function(resolve,reject){
					setTimeout(function(){
						resolve("防控1")
					},1000)
				})
			}
			function fn4(){
				return new Promise(function(resolve,reject){
					setTimeout(function(){
						resolve("加油1")
					},1000)
				})
			}
			
			fn1().then(function(data){
				console.log(data)
				return fn2()
			}).then(function(data){
				console.log(data)
				return fn3()
			}).then(function(data){
				console.log(data)
				return fn4()
			}).then(function(data){
				console.log(data)
			})
			
			
			//then()中有两个参数：
			//第一个参数执行Promise的成功回调函数
			//第二个参数执行Promise的失败回调函数
			
			//在vuejs中有一个axios插件  只要是进行异步操作---》ajax
			
			//Promise 对象的状态不受外界影响。Promise 对象代表一个异步操作，有三种状态：
			//pending（进行中）
			//fulfilled（已成功）
			//rejected（已失败）
			
			//注意:Promise的状态只能从
			//pending变为fulfilled
			//pending到rejected
		</script>
	</body>
</html>
